!function(){function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(e,r,i,a){var s=r&&r.prototype instanceof u?r:u,l=Object.create(s.prototype);return o(l,"_invoke",function(e,o,r){var i,a,s,u=0,l=r||[],f=!1,d={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(n,e){return i=n,a=0,s=t,d.n=e,c}};function h(e,o){for(a=e,s=o,n=0;!f&&u&&!r&&n<l.length;n++){var r,i=l[n],h=d.p,p=i[2];e>3?(r=p===o)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=h&&((r=e<2&&h<i[1])?(a=0,d.v=o,d.n=i[1]):h<p&&(r=e<3||i[0]>o||o>p)&&(i[4]=e,i[5]=o,d.n=p,a=0))}if(r||e>1)return c;throw f=!0,o}return function(r,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),a=l,s=p;(n=a<2?t:s)||!f;){i||(a?a<3?(a>1&&(d.n=-1),h(a,s)):d.n=s:d.v=s);try{if(u=2,i){if(a||(r="next"),n=i[r]){if(!(n=n.call(i,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),a=1);i=t}else if((n=(f=d.n<0)?s:e.call(o,d))!==c)break}catch(n){i=t,a=1,s=n}finally{u=1}}return{value:n,done:f}}}(e,i,a),!0),l}var c={};function u(){}function l(){}function f(){}n=Object.getPrototypeOf;var d=[][i]?n(n([][i]())):(o(n={},i,function(){return this}),n),h=f.prototype=u.prototype=Object.create(d);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t}return l.prototype=f,o(h,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(h),o(h,a,"Generator"),o(h,i,function(){return this}),o(h,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:p}})()}function o(t,n,e,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}o=function(t,n,e,r){function a(n,e){o(t,n,function(t){return this._invoke(n,e,t)})}n?i?i(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(a("next",0),a("throw",1),a("return",2))},o(t,n,e,r)}function r(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var o,r,i,a,s=[],c=!0,u=!1;try{if(i=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;c=!1}else for(;!(c=(o=i.call(e)).done)&&(s.push(o.value),s.length!==n);c=!0);}catch(t){u=!0,r=t}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,n)||a(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=a(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==e.return||e.return()}finally{if(c)throw i}}}}function a(t,n){if(t){if("string"==typeof t)return s(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,n):void 0}}function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=Array(n);e<n;e++)o[e]=t[e];return o}function c(t,n,e,o,r,i,a){try{var s=t[i](a),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(o,r)}function u(t){return function(){var n=this,e=arguments;return new Promise(function(o,r){var i=t.apply(n,e);function a(t){c(i,o,r,a,s,"next",t)}function s(t){c(i,o,r,a,s,"throw",t)}a(void 0)})}}function l(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,d(o.key),o)}}function f(t,n,e){return n&&l(t.prototype,n),e&&l(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(n){var e=function(n,e){if("object"!=t(n)||!n)return n;var o=n[Symbol.toPrimitive];if(void 0!==o){var r=o.call(n,e||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==t(e)?e:e+""}function h(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function p(n,e,o){return e=E(e),function(n,e){if(e&&("object"==t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)}(n,g()?Reflect.construct(e,o||[],E(n).constructor):e.apply(n,o))}function v(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&m(t,n)}function y(t){var n="function"==typeof Map?new Map:void 0;return y=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(g())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var r=new(t.bind.apply(t,o));return e&&m(r,e.prototype),r}(t,arguments,E(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),m(e,t)},y(t)}function g(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(g=function(){return!!t})()}function m(t,n){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},m(t,n)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}System.register([],function(t,o){"use strict";return{execute:function(){var o,a,s;t("SchemaType",o),function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"}(o||t("SchemaType",o={})),t("ExecutableCodeLanguage",a),function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"}(a||t("ExecutableCodeLanguage",a={})),t("Outcome",s),function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(s||t("Outcome",s={}));
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var c,l,d,g,m,E,C,O,b=t("POSSIBLE_ROLES",["user","model","function","system"]);t("HarmCategory",c),function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(c||t("HarmCategory",c={})),t("HarmBlockThreshold",l),function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"}(l||t("HarmBlockThreshold",l={})),t("HarmProbability",d),function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"}(d||t("HarmProbability",d={})),t("BlockReason",g),function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"}(g||t("BlockReason",g={})),t("FinishReason",m),function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"}(m||t("FinishReason",m={})),t("TaskType",E),function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"}(E||t("TaskType",E={})),t("FunctionCallingMode",C),function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"}(C||t("FunctionCallingMode",C={})),t("DynamicRetrievalMode",O),function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"}(O||t("DynamicRetrievalMode",O={}));
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var _=function(t){function n(t){return h(this,n),p(this,n,["[GoogleGenerativeAI Error]: ".concat(t)])}return v(n,t),f(n)}(y(Error));t("GoogleGenerativeAIError",_);var w=function(t){function n(t,e){var o;return h(this,n),(o=p(this,n,[t])).response=e,o}return v(n,t),f(n)}(_);t("GoogleGenerativeAIResponseError",w);var I=function(t){function n(t,e,o,r){var i;return h(this,n),(i=p(this,n,[t])).status=e,i.statusText=o,i.errorDetails=r,i}return v(n,t),f(n)}(_);t("GoogleGenerativeAIFetchError",I);var T=function(t){function n(){return h(this,n),p(this,n,arguments)}return v(n,t),f(n)}(_);t("GoogleGenerativeAIRequestInputError",T);var S=function(t){function n(){return h(this,n),p(this,n,arguments)}return v(n,t),f(n)}(_);t("GoogleGenerativeAIAbortError",S);
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var A;!function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"}(A||(A={}));var R=function(){return f(function t(n,e,o,r,i){h(this,t),this.model=n,this.task=e,this.apiKey=o,this.stream=r,this.requestOptions=i},[{key:"toString",value:function(){var t,n,e=(null===(t=this.requestOptions)||void 0===t?void 0:t.apiVersion)||"v1beta",o=(null===(n=this.requestOptions)||void 0===n?void 0:n.baseUrl)||"https://generativelanguage.googleapis.com",r="".concat(o,"/").concat(e,"/").concat(this.model,":").concat(this.task);return this.stream&&(r+="?alt=sse"),r}}])}();function N(t){var n=[];return(null==t?void 0:t.apiClient)&&n.push(t.apiClient),n.push("".concat("genai-js","/").concat("0.24.1")),n.join(" ")}function M(t){return j.apply(this,arguments)}function j(){return(j=u(e().m(function t(n){var o,a,s,c,u,l,f,d,h,p;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:if((a=new Headers).append("Content-Type","application/json"),a.append("x-goog-api-client",N(n.requestOptions)),a.append("x-goog-api-key",n.apiKey),!(s=null===(o=n.requestOptions)||void 0===o?void 0:o.customHeaders)){t.n=12;break}if(s instanceof Headers){t.n=3;break}t.p=1,s=new Headers(s),t.n=3;break;case 2:throw t.p=2,h=t.v,new T("unable to convert customHeaders value ".concat(JSON.stringify(s)," to Headers: ").concat(h.message));case 3:c=i(s.entries()),t.p=4,c.s();case 5:if((u=c.n()).done){t.n=9;break}if(l=r(u.value,2),f=l[0],d=l[1],"x-goog-api-key"!==f){t.n=6;break}throw new T("Cannot set reserved header name ".concat(f));case 6:if("x-goog-api-client"!==f){t.n=7;break}throw new T("Header name ".concat(f," can only be set using the apiClient field"));case 7:a.append(f,d);case 8:t.n=5;break;case 9:t.n=11;break;case 10:t.p=10,p=t.v,c.e(p);case 11:return t.p=11,c.f(),t.f(11);case 12:return t.a(2,a)}},t,null,[[4,10,11,12],[1,2]])}))).apply(this,arguments)}function k(t,n,e,o,r,i){return P.apply(this,arguments)}function P(){return(P=u(e().m(function t(n,o,r,i,a,s){var c,u,l,f,d,h,p;return e().w(function(t){for(;;)switch(t.n){case 0:return c=new R(n,o,r,i,s),u=c.toString(),l=Object,f=Object.assign({},B(s)),t.n=1,M(c);case 1:return d=t.v,h=a,p=l.assign.call(l,f,{method:"POST",headers:d,body:h}),t.a(2,{url:u,fetchOptions:p})}},t)}))).apply(this,arguments)}function G(t,n,e,o,r){return D.apply(this,arguments)}function D(){return D=u(e().m(function t(n,o,r,i,a){var s,c,u,l,f,d=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:return s=d.length>5&&void 0!==d[5]?d[5]:{},c=d.length>6&&void 0!==d[6]?d[6]:fetch,t.n=1,k(n,o,r,i,a,s);case 1:return u=t.v,l=u.url,f=u.fetchOptions,t.a(2,L(l,f,c))}},t)})),D.apply(this,arguments)}function L(t,n){return x.apply(this,arguments)}function x(){return x=u(e().m(function t(n,o){var r,i,a=arguments;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:fetch,t.p=1,t.n=2,r(n,o);case 2:i=t.v,t.n=4;break;case 3:t.p=3,H(t.v,n);case 4:if(i.ok){t.n=5;break}return t.n=5,F(i,n);case 5:return t.a(2,i)}},t,null,[[1,3]])})),x.apply(this,arguments)}function H(t,n){var e=t;throw"AbortError"===e.name?(e=new S("Request aborted when fetching ".concat(n.toString(),": ").concat(t.message))).stack=t.stack:t instanceof I||t instanceof T||((e=new _("Error fetching from ".concat(n.toString(),": ").concat(t.message))).stack=t.stack),e}function F(t,n){return U.apply(this,arguments)}function U(){return(U=u(e().m(function t(n,o){var r,i,a;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return r="",t.p=1,t.n=2,n.json();case 2:a=t.v,r=a.error.message,a.error.details&&(r+=" ".concat(JSON.stringify(a.error.details)),i=a.error.details),t.n=4;break;case 3:t.p=3,t.v;case 4:throw new I("Error fetching from ".concat(o.toString(),": [").concat(n.status," ").concat(n.statusText,"] ").concat(r),n.status,n.statusText,i);case 5:return t.a(2)}},t,null,[[1,3]])}))).apply(this,arguments)}function B(t){var n={};if(void 0!==(null==t?void 0:t.signal)||(null==t?void 0:t.timeout)>=0){var e=new AbortController;(null==t?void 0:t.timeout)>=0&&setTimeout(function(){return e.abort()},t.timeout),(null==t?void 0:t.signal)&&t.signal.addEventListener("abort",function(){e.abort()}),n.signal=e.signal}return n}
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Y(t){return t.text=function(){if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn("This response had ".concat(t.candidates.length," ")+"candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates."),J(t.candidates[0]))throw new w("".concat(V(t)),t);return function(t){var n,e,o,r,a=[];if(null===(e=null===(n=t.candidates)||void 0===n?void 0:n[0].content)||void 0===e?void 0:e.parts){var s,c=i(null===(r=null===(o=t.candidates)||void 0===o?void 0:o[0].content)||void 0===r?void 0:r.parts);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.text&&a.push(u.text),u.executableCode&&a.push("\n```"+u.executableCode.language+"\n"+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&a.push("\n```\n"+u.codeExecutionResult.output+"\n```\n")}}catch(l){c.e(l)}finally{c.f()}}return a.length>0?a.join(""):""}(t)}if(t.promptFeedback)throw new w("Text not available. ".concat(V(t)),t);return""},t.functionCall=function(){if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn("This response had ".concat(t.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),J(t.candidates[0]))throw new w("".concat(V(t)),t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),K(t)[0]}if(t.promptFeedback)throw new w("Function call not available. ".concat(V(t)),t)},t.functionCalls=function(){if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn("This response had ".concat(t.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),J(t.candidates[0]))throw new w("".concat(V(t)),t);return K(t)}if(t.promptFeedback)throw new w("Function call not available. ".concat(V(t)),t)},t}function K(t){var n,e,o,r,a=[];if(null===(e=null===(n=t.candidates)||void 0===n?void 0:n[0].content)||void 0===e?void 0:e.parts){var s,c=i(null===(r=null===(o=t.candidates)||void 0===o?void 0:o[0].content)||void 0===r?void 0:r.parts);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.functionCall&&a.push(u.functionCall)}}catch(l){c.e(l)}finally{c.f()}}return a.length>0?a:void 0}var q=[m.RECITATION,m.SAFETY,m.LANGUAGE];function J(t){return!!t.finishReason&&q.includes(t.finishReason)}function V(t){var n,e,o,r="";if(t.candidates&&0!==t.candidates.length||!t.promptFeedback){if(null===(o=t.candidates)||void 0===o?void 0:o[0]){var i=t.candidates[0];J(i)&&(r+="Candidate was blocked due to ".concat(i.finishReason),i.finishMessage&&(r+=": ".concat(i.finishMessage)))}}else r+="Response was blocked",(null===(n=t.promptFeedback)||void 0===n?void 0:n.blockReason)&&(r+=" due to ".concat(t.promptFeedback.blockReason)),(null===(e=t.promptFeedback)||void 0===e?void 0:e.blockReasonMessage)&&(r+=": ".concat(t.promptFeedback.blockReasonMessage));return r}function W(t){return this instanceof W?(this.v=t,this):new W(t)}function X(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=e.apply(t,n||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(t){r[t]&&(o[t]=function(n){return new Promise(function(e,o){i.push([t,n,e,o])>1||s(t,n)})})}function s(t,n){try{(e=r[t](n)).value instanceof W?Promise.resolve(e.value.v).then(c,u):l(i[0][2],e)}catch(o){l(i[0][3],o)}var e}function c(t){s("next",t)}function u(t){s("throw",t)}function l(t,n){t(n),i.shift(),i.length&&s(i[0][0],i[0][1])}}"function"==typeof SuppressedError&&SuppressedError;
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Q=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function $(t){var n=function(t){var n=t.getReader();return new ReadableStream({start:function(t){var e="";return o();function o(){return n.read().then(function(n){var r=n.value;if(n.done)return e.trim()?void t.error(new _("Failed to parse stream")):void t.close();for(var i,a=(e+=r).match(Q);a;){try{i=JSON.parse(a[1])}catch(s){return void t.error(new _('Error parsing JSON response: "'.concat(a[1],'"')))}t.enqueue(i),a=(e=e.substring(a[0].length)).match(Q)}return o()}).catch(function(t){var n=t;throw n.stack=t.stack,n="AbortError"===n.name?new S("Request aborted when reading from the stream"):new _("Error reading from the stream")})}}})}(t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),e=r(n.tee(),2),o=e[0],i=e[1];return{stream:tt(o),response:z(i)}}function z(t){return Z.apply(this,arguments)}function Z(){return(Z=u(e().m(function t(n){var o,r,i,a,s;return e().w(function(t){for(;;)switch(t.n){case 0:o=[],r=n.getReader();case 1:return t.n=2,r.read();case 2:if(i=t.v,a=i.done,s=i.value,!a){t.n=3;break}return t.a(2,Y(nt(o)));case 3:o.push(s),t.n=1;break;case 4:return t.a(2)}},t)}))).apply(this,arguments)}function tt(t){return X(this,arguments,e().m(function n(){var o,r,i;return e().w(function(n){for(;;)switch(n.n){case 0:o=t.getReader();case 1:return n.n=2,W(o.read());case 2:if(r=n.v,i=r.value,!r.done){n.n=3;break}return n.a(3,6);case 3:return n.n=4,W(Y(i));case 4:return n.n=5,n.v;case 5:n.n=1;break;case 6:return n.a(2)}},n)}))}function nt(t){var n,e=t[t.length-1],o={promptFeedback:null==e?void 0:e.promptFeedback},r=i(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.candidates){var s,c=0,u=i(a.candidates);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(o.candidates||(o.candidates=[]),o.candidates[c]||(o.candidates[c]={index:c}),o.candidates[c].citationMetadata=l.citationMetadata,o.candidates[c].groundingMetadata=l.groundingMetadata,o.candidates[c].finishReason=l.finishReason,o.candidates[c].finishMessage=l.finishMessage,o.candidates[c].safetyRatings=l.safetyRatings,l.content&&l.content.parts){o.candidates[c].content||(o.candidates[c].content={role:l.content.role||"user",parts:[]});var f,d={},h=i(l.content.parts);try{for(h.s();!(f=h.n()).done;){var p=f.value;p.text&&(d.text=p.text),p.functionCall&&(d.functionCall=p.functionCall),p.executableCode&&(d.executableCode=p.executableCode),p.codeExecutionResult&&(d.codeExecutionResult=p.codeExecutionResult),0===Object.keys(d).length&&(d.text=""),o.candidates[c].content.parts.push(d)}}catch(v){h.e(v)}finally{h.f()}}}}catch(v){u.e(v)}finally{u.f()}c++}a.usageMetadata&&(o.usageMetadata=a.usageMetadata)}}catch(v){r.e(v)}finally{r.f()}return o}
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function et(t,n,e,o){return ot.apply(this,arguments)}function ot(){return(ot=u(e().m(function t(n,o,r,i){var a;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,G(o,A.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(r),i);case 1:return a=t.v,t.a(2,$(a))}},t)}))).apply(this,arguments)}function rt(t,n,e,o){return it.apply(this,arguments)}
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function it(){return(it=u(e().m(function t(n,o,r,i){var a,s,c;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,G(o,A.GENERATE_CONTENT,n,!1,JSON.stringify(r),i);case 1:return a=t.v,t.n=2,a.json();case 2:return s=t.v,c=Y(s),t.a(2,{response:c})}},t)}))).apply(this,arguments)}function at(t){if(null!=t)return"string"==typeof t?{role:"system",parts:[{text:t}]}:t.text?{role:"system",parts:[t]}:t.parts?t.role?t:{role:"system",parts:t.parts}:void 0}function st(t){var n=[];if("string"==typeof t)n=[{text:t}];else{var e,o=i(t);try{for(o.s();!(e=o.n()).done;){var r=e.value;"string"==typeof r?n.push({text:r}):n.push(r)}}catch(a){o.e(a)}finally{o.f()}}return function(t){var n,e={role:"user",parts:[]},o={role:"function",parts:[]},r=!1,s=!1,c=i(t);try{for(c.s();!(n=c.n()).done;){var u=n.value;"functionResponse"in u?(o.parts.push(u),s=!0):(e.parts.push(u),r=!0)}}catch(a){c.e(a)}finally{c.f()}if(r&&s)throw new _("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new _("No content is provided for sending chat message.");if(r)return e;return o}(n)}function ct(t,n){var e,o={model:null==n?void 0:n.model,generationConfig:null==n?void 0:n.generationConfig,safetySettings:null==n?void 0:n.safetySettings,tools:null==n?void 0:n.tools,toolConfig:null==n?void 0:n.toolConfig,systemInstruction:null==n?void 0:n.systemInstruction,cachedContent:null===(e=null==n?void 0:n.cachedContent)||void 0===e?void 0:e.name,contents:[]},r=null!=t.generateContentRequest;if(t.contents){if(r)throw new T("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=t.contents}else if(r)o=Object.assign(Object.assign({},o),t.generateContentRequest);else{var i=st(t);o.contents=[i]}return{generateContentRequest:o}}function ut(t){var n;t.contents?n=t:n={contents:[st(t)]};return t.systemInstruction&&(n.systemInstruction=at(t.systemInstruction)),n}function lt(t){return"string"==typeof t||Array.isArray(t)?{content:st(t)}:t}
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var ft=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],dt={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function ht(t){var n;if(void 0===t.candidates||0===t.candidates.length)return!1;var e=null===(n=t.candidates[0])||void 0===n?void 0:n.content;if(void 0===e)return!1;if(void 0===e.parts||0===e.parts.length)return!1;var o,r=i(e.parts);try{for(r.s();!(o=r.n()).done;){var a=o.value;if(void 0===a||0===Object.keys(a).length)return!1;if(void 0!==a.text&&""===a.text)return!1}}catch(s){r.e(s)}finally{r.f()}return!0}
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var pt="SILENT_ERROR",vt=function(){return f(function t(n,e,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};h(this,t),this.model=e,this.params=o,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,(null==o?void 0:o.history)&&(!function(t){var n,e=!1,o=i(t);try{for(o.s();!(n=o.n()).done;){var r=n.value,a=r.role,s=r.parts;if(!e&&"user"!==a)throw new _("First content should be with role 'user', got ".concat(a));if(!b.includes(a))throw new _("Each item should include role field. Got ".concat(a," but valid roles are: ").concat(JSON.stringify(b)));if(!Array.isArray(s))throw new _("Content should have 'parts' property with an array of Parts");if(0===s.length)throw new _("Each Content should have at least one part");var c,u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0},l=i(s);try{for(l.s();!(c=l.n()).done;)for(var f=c.value,d=0,h=ft;d<h.length;d++){var p=h[d];p in f&&(u[p]+=1)}}catch(E){l.e(E)}finally{l.f()}for(var v=dt[a],y=0,g=ft;y<g.length;y++){var m=g[y];if(!v.includes(m)&&u[m]>0)throw new _("Content with role '".concat(a,"' can't contain '").concat(m,"' part"))}e=!0}}catch(E){o.e(E)}finally{o.f()}}(o.history),this._history=o.history)},[{key:"getHistory",value:(r=u(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._sendPromise;case 1:return t.a(2,this._history)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"sendMessage",value:(o=u(e().m(function t(o){var r,i,a,s,c,u,l,f,d,h,p,v=this,y=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},t.n=1,this._sendPromise;case 1:return f=st(o),d={safetySettings:null===(i=this.params)||void 0===i?void 0:i.safetySettings,generationConfig:null===(a=this.params)||void 0===a?void 0:a.generationConfig,tools:null===(s=this.params)||void 0===s?void 0:s.tools,toolConfig:null===(c=this.params)||void 0===c?void 0:c.toolConfig,systemInstruction:null===(u=this.params)||void 0===u?void 0:u.systemInstruction,cachedContent:null===(l=this.params)||void 0===l?void 0:l.cachedContent,contents:[].concat(n(this._history),[f])},h=Object.assign(Object.assign({},this._requestOptions),r),this._sendPromise=this._sendPromise.then(function(){return rt(v._apiKey,v.model,d,h)}).then(function(t){var n;if(ht(t.response)){v._history.push(f);var e=Object.assign({parts:[],role:"model"},null===(n=t.response.candidates)||void 0===n?void 0:n[0].content);v._history.push(e)}else{var o=V(t.response);o&&console.warn("sendMessage() was unsuccessful. ".concat(o,". Inspect response object for details."))}p=t}).catch(function(t){throw v._sendPromise=Promise.resolve(),t}),t.n=2,this._sendPromise;case 2:return t.a(2,p)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"sendMessageStream",value:(t=u(e().m(function t(o){var r,i,a,s,c,u,l,f,d,h,p,v=this,y=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},t.n=1,this._sendPromise;case 1:return f=st(o),d={safetySettings:null===(i=this.params)||void 0===i?void 0:i.safetySettings,generationConfig:null===(a=this.params)||void 0===a?void 0:a.generationConfig,tools:null===(s=this.params)||void 0===s?void 0:s.tools,toolConfig:null===(c=this.params)||void 0===c?void 0:c.toolConfig,systemInstruction:null===(u=this.params)||void 0===u?void 0:u.systemInstruction,cachedContent:null===(l=this.params)||void 0===l?void 0:l.cachedContent,contents:[].concat(n(this._history),[f])},h=Object.assign(Object.assign({},this._requestOptions),r),p=et(this._apiKey,this.model,d,h),this._sendPromise=this._sendPromise.then(function(){return p}).catch(function(t){throw new Error(pt)}).then(function(t){return t.response}).then(function(t){if(ht(t)){v._history.push(f);var n=Object.assign({},t.candidates[0].content);n.role||(n.role="model"),v._history.push(n)}else{var e=V(t);e&&console.warn("sendMessageStream() was unsuccessful. ".concat(e,". Inspect response object for details."))}}).catch(function(t){t.message!==pt&&console.error(t)}),t.a(2,p)}},t,this)})),function(n){return t.apply(this,arguments)})}]);var t,o,r}();
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function yt(t,n,e,o){return gt.apply(this,arguments)}
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function gt(){return(gt=u(e().m(function t(n,o,r,i){var a;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,G(o,A.COUNT_TOKENS,n,!1,JSON.stringify(r),i);case 1:return a=t.v,t.a(2,a.json())}},t)}))).apply(this,arguments)}function mt(t,n,e,o){return Et.apply(this,arguments)}function Et(){return(Et=u(e().m(function t(n,o,r,i){var a;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,G(o,A.EMBED_CONTENT,n,!1,JSON.stringify(r),i);case 1:return a=t.v,t.a(2,a.json())}},t)}))).apply(this,arguments)}function Ct(t,n,e,o){return Ot.apply(this,arguments)}
/**
             * @license
             * Copyright 2024 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Ot(){return(Ot=u(e().m(function t(n,o,r,i){var a,s;return e().w(function(t){for(;;)switch(t.n){case 0:return a=r.requests.map(function(t){return Object.assign(Object.assign({},t),{model:o})}),t.n=1,G(o,A.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:a}),i);case 1:return s=t.v,t.a(2,s.json())}},t)}))).apply(this,arguments)}t("ChatSession",vt);var bt=function(){return f(function t(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};h(this,t),this.apiKey=n,this._requestOptions=o,e.model.includes("/")?this.model=e.model:this.model="models/".concat(e.model),this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=at(e.systemInstruction),this.cachedContent=e.cachedContent},[{key:"generateContent",value:(i=u(e().m(function t(n){var o,r,i,a,s=arguments;return e().w(function(t){for(;;)if(0===t.n)return o=s.length>1&&void 0!==s[1]?s[1]:{},i=ut(n),a=Object.assign(Object.assign({},this._requestOptions),o),t.a(2,rt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(r=this.cachedContent)||void 0===r?void 0:r.name},i),a))},t,this)})),function(t){return i.apply(this,arguments)})},{key:"generateContentStream",value:(r=u(e().m(function t(n){var o,r,i,a,s=arguments;return e().w(function(t){for(;;)if(0===t.n)return o=s.length>1&&void 0!==s[1]?s[1]:{},i=ut(n),a=Object.assign(Object.assign({},this._requestOptions),o),t.a(2,et(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(r=this.cachedContent)||void 0===r?void 0:r.name},i),a))},t,this)})),function(t){return r.apply(this,arguments)})},{key:"startChat",value:function(t){var n;return new vt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},t),this._requestOptions)}},{key:"countTokens",value:(o=u(e().m(function t(n){var o,r,i,a=arguments;return e().w(function(t){for(;;)if(0===t.n)return o=a.length>1&&void 0!==a[1]?a[1]:{},r=ct(n,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),o),t.a(2,yt(this.apiKey,this.model,r,i))},t,this)})),function(t){return o.apply(this,arguments)})},{key:"embedContent",value:(n=u(e().m(function t(n){var o,r,i,a=arguments;return e().w(function(t){for(;;)if(0===t.n)return o=a.length>1&&void 0!==a[1]?a[1]:{},r=lt(n),i=Object.assign(Object.assign({},this._requestOptions),o),t.a(2,mt(this.apiKey,this.model,r,i))},t,this)})),function(t){return n.apply(this,arguments)})},{key:"batchEmbedContents",value:(t=u(e().m(function t(n){var o,r,i=arguments;return e().w(function(t){for(;;)if(0===t.n)return o=i.length>1&&void 0!==i[1]?i[1]:{},r=Object.assign(Object.assign({},this._requestOptions),o),t.a(2,Ct(this.apiKey,this.model,n,r))},t,this)})),function(n){return t.apply(this,arguments)})}]);var t,n,o,r,i}();t("GenerativeModel",bt),t("GoogleGenerativeAI",function(){return f(function t(n){h(this,t),this.apiKey=n},[{key:"getGenerativeModel",value:function(t,n){if(!t.model)throw new _("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new bt(this.apiKey,t,n)}},{key:"getGenerativeModelFromCachedContent",value:function(t,n,e){if(!t.name)throw new T("Cached content must contain a `name` field.");if(!t.model)throw new T("Cached content must contain a `model` field.");for(var o=0,r=["model","systemInstruction"];o<r.length;o++){var i=r[o];if((null==n?void 0:n[i])&&t[i]&&(null==n?void 0:n[i])!==t[i]){if("model"===i)if((n.model.startsWith("models/")?n.model.replace("models/",""):n.model)===(t.model.startsWith("models/")?t.model.replace("models/",""):t.model))continue;throw new T('Different value for "'.concat(i,'" specified in modelParams')+" (".concat(n[i],") and cachedContent (").concat(t[i],")"))}}var a=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new bt(this.apiKey,a,e)}}])}())}}})}();
